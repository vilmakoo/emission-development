(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,r){e.exports=r(235)},231:function(e,t,r){},235:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(35),s=r.n(o),i=r(13),c=r(7),p=r.n(c),u=r(14),h=r(16),l=r(17),m=r(19),f=r(18),d=r(20),v=r(237),E=r(236),g=r(26),b=r(50),y=r.n(b),O={searchCountrysEmissions:function(){var e=Object(u.a)(p.a.mark(function e(t,r,a){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/emissions/".concat(t,"?percapita=").concat(r,"&compare=").concat(a));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","error");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,r,a){return e.apply(this,arguments)}}(),updateDatabase:function(){var e=Object(u.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/update_database");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","error");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),searchTopEmitters:function(){var e=Object(u.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/api/emissions/top_emitters");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","error");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},C={searchTerm:"",searchPopulations:!1,compare:!1,topEmitters:void 0},T=function(e){return{type:"SET_ERROR",error:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SEARCH_TERM":return Object(g.a)({},e,{searchTerm:t.searchTerm});case"TOGGLE_POPULATION_CHECK_BOX":return Object(g.a)({},e,{searchPopulations:!e.searchPopulations});case"TOGGLE_COMPARE_CHECK_BOX":return Object(g.a)({},e,{compare:!e.compare});case"SET_RESULT":return{searchTerm:e.searchTerm,searchPopulations:e.searchPopulations,compare:e.compare,country:t.country,data:t.data,highIncomeAverages:t.highIncomeAverages};case"SET_ERROR":return Object(g.a)({},e,{error:t.error});case"SET_TOP_EMITTERS":return{searchTerm:e.searchTerm,searchPopulations:e.searchPopulations,compare:e.compare,topEmitters:t.data};default:return e}},j=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(E.a,{onSubmit:function(t){t.preventDefault(),e.props.searchCountrysEmissions(e.props.searchTerm,e.props.searchPopulations,e.props.compare)}},n.a.createElement(E.a.Label,{className:"search-title"},"Search"),n.a.createElement("p",null,"Search for a country to see how its CO\xb2 emissions have developed during the years"),n.a.createElement(E.a.Control,{className:"search-input",type:"input",value:this.props.searchTerm,onChange:function(t){e.props.changeSearchTerm(t.target.value)},placeholder:"Search"}),n.a.createElement(E.a.Check,{className:"search-checkbox",label:"Include populations",onChange:function(t){e.props.togglePopulationCheckBox()}}),n.a.createElement(E.a.Check,{className:"search-checkbox",label:"Compare to the averages of countries with high income",onChange:function(t){e.props.toggleCompareCheckBox()}}),n.a.createElement(v.a,{className:"search-button",type:"submit"},"Search")),n.a.createElement(v.a,{variant:"info",onClick:function(t){e.props.searchTopEmitters()}},"Search for countries with largest emissions in 2014"))}}]),t}(a.Component),A={changeSearchTerm:function(e){return{type:"CHANGE_SEARCH_TERM",searchTerm:e}},searchCountrysEmissions:function(e,t,r){return function(){var a=Object(u.a)(p.a.mark(function a(n){var o;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.searchCountrysEmissions(e,t,r);case 2:"error"===(o=a.sent)?n(T("Couldn't connect to the server")):"NOT FOUND"===o.country.name?n(T("Country not found")):n({type:"SET_RESULT",country:o.country.name,data:o.country.data,highIncomeAverages:o.highIncomeAverages}),setTimeout(function(){n(T(null))},4e3);case 5:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},togglePopulationCheckBox:function(){return{type:"TOGGLE_POPULATION_CHECK_BOX"}},toggleCompareCheckBox:function(){return{type:"TOGGLE_COMPARE_CHECK_BOX"}},searchTopEmitters:function(){return function(){var e=Object(u.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.searchTopEmitters();case 2:r=e.sent,t("error"===r?T("Couldn't connect to the server"):{type:"SET_TOP_EMITTERS",data:r}),setTimeout(function(){t(T(null))},4e3);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},w=Object(i.b)(function(e){return{searchTerm:e.search.searchTerm,searchPopulations:e.search.searchPopulations,compare:e.search.compare}},A)(j),S=r(62),_=r.n(S),k=r(51),I=r.n(k),P=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=function(e,t){return{theme:{palette:"palette6"},title:{text:e,align:"center",margin:20,style:{fontSize:"20px",color:"#EA3546"}},yaxis:t,tooltip:{fixed:{enabled:!0,position:"topLeft",offsetY:30,offsetX:60},x:{formatter:function(e){return"Year: "+e}}},legend:{position:"top",horizontalAlign:"right",offsetX:40}}},t=function(e,t,r){var a=e.reduce(function(e,t){return Math.max(e,t)},0),n=t.reduce(function(e,t){return Math.max(e,t)},0);return Math.max(a,n)+r},r=e("Development of CO\xb2-emissions",[{min:0,max:this.props.data?t(this.props.highIncomeAverages?this.props.highIncomeAverages.averages.map(function(e){return e.emissionsAverage}):[],this.props.data.map(function(e){return e.emissions}),5e3):1e3,seriesName:"CO\xb2-emissions",axisTicks:{show:!0},axisBorder:{show:!0,color:"#662E9B"},labels:{style:{color:"#662E9B"}},title:{text:"CO\xb2-emissions (kt)",style:{color:"#662E9B"}},tooltip:{enabled:!0}}]),a=e("Development of Populations",[{min:0,max:this.props.data&&this.props.data.map(function(e){return e.population})?t(this.props.highIncomeAverages?this.props.highIncomeAverages.averages.map(function(e){return e.populationAverage}):[],this.props.data.map(function(e){return e.population}),1e6):1e3,seriesName:"Population",axisTicks:{show:!0},axisBorder:{show:!0,color:"#662E9B"},labels:{style:{color:"#662E9B"}},title:{text:"Population",style:{color:"#662E9B"}},tooltip:{enabled:!0}}]),o=e("Development of CO\xb2-emissions per Capita",[{seriesName:"CO\xb2-emissions Per Capita",min:0,max:this.props.data&&this.props.data.map(function(e){return e.perCapita})?t(this.props.highIncomeAverages?this.props.highIncomeAverages.averages.map(function(e){return 1e6*e.perCapitaAverage}):[],this.props.data.map(function(e){return 1e6*e.perCapita}),1e3):1e3,axisTicks:{show:!0},axisBorder:{show:!0,color:"#662E9B"},labels:{style:{color:"#662E9B"}},title:{text:"CO\xb2-emissions Per Capita (kg)",style:{color:"#662E9B"}},tooltip:{enabled:!0}}]),s=[{name:this.props.country?"".concat(this.props.country):"Searched country",type:"line",data:this.props.data&&this.props.data.map(function(e){return e.emissions})?this.props.data.filter(function(e){return null!==e.emissions}).map(function(e){return{x:e.year,y:e.emissions}}):[]},{name:"Average of countries with high income",type:"line",data:this.props.highIncomeAverages?this.props.highIncomeAverages.averages.filter(function(e){return e.year&&0!==e.emissionsAverage}).map(function(e){return{x:e.year,y:e.emissionsAverage}}):[]}],i=[{name:this.props.country?"".concat(this.props.country):"Searched country",type:"line",data:this.props.data&&this.props.data.map(function(e){return e.population})?this.props.data.filter(function(e){return null!==e.population}).map(function(e){return{x:e.year,y:e.population}}):[]},{name:"Average of countries with high income",type:"line",data:this.props.highIncomeAverages?this.props.highIncomeAverages.averages.filter(function(e){return e.year&&0!==e.populationAverage}).map(function(e){return{x:e.year,y:e.populationAverage}}):[]}],c=[{name:this.props.country?"".concat(this.props.country):"Searched country",type:"line",data:this.props.data&&this.props.data.map(function(e){return e.perCapita})?this.props.data.filter(function(e){return null!==e.perCapita}).map(function(e){return{x:e.year,y:1e6*e.perCapita}}):[]},{name:"Average of countries with high income",type:"line",data:this.props.highIncomeAverages?this.props.highIncomeAverages.averages.filter(function(e){return e.year&&e.perCapitaAverage&&0!==e.perCapitaAverage}).map(function(e){return{x:e.year,y:1e6*e.perCapitaAverage}}):[]}];return n.a.createElement("div",null,n.a.createElement("div",{className:"App"},n.a.createElement("div",{id:"country"},n.a.createElement("b",null,"Country: ",this.props.country)),n.a.createElement("div",{id:"emissions-chart",className:"chart"},n.a.createElement(I.a,{options:r,series:s,type:"line",width:"1000"})),n.a.createElement("div",{id:"populations-chart"},n.a.createElement(I.a,{options:a,series:i,type:"line",width:"1000"})),n.a.createElement("div",{id:"emissions-per-capita"},n.a.createElement(I.a,{options:o,series:c,type:"line",width:"1000"}))))}}]),t}(a.Component),R=Object(i.b)(function(e){return{country:e.search.country,data:e.search.data,highIncomeAverages:e.search.highIncomeAverages}})(P),B=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e;return this.props.data?e=n.a.createElement(R,null):this.props.topEmitters&&(e=n.a.createElement(_.a,null,this.props.topEmitters.map(function(e){return n.a.createElement(_.a.Item,{key:e},e)}))),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("h2",null,"Results"),e))}}]),t}(a.Component),D=Object(i.b)(function(e){return{data:e.search.data,topEmitters:e.search.topEmitters}})(B),N=r(96),G=r.n(N),L=r(97),M=r.n(L),U=r(98),H=r.n(U),X=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t;return e=this.props.databaseError?this.props.databaseError:this.props.searchError?this.props.searchError:"in progress"===this.props.updatingDatabase?"Updating database...":"done"===this.props.updatingDatabase?"Database is now up to date!":void 0,t=this.props.databaseError||this.props.searchError?"notification-error":"notification-info",n.a.createElement("div",null,n.a.createElement(G.a,{open:void 0!==e},n.a.createElement(M.a,{classes:{root:t}},n.a.createElement(H.a,{classes:{root:"notification-text"}},e))))}}]),t}(n.a.Component),K=Object(i.b)(function(e){return{updatingDatabase:e.database.updatingDatabase,databaseError:e.database.error,searchError:e.search.error}})(X),z={updatingDatabase:null,error:null},J=function(e){return{type:"SET_UPDATING_STATE",updatingState:e}},Y=function(e){return{type:"SET_ERROR",error:e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return Object(g.a)({},e,{error:t.error});case"SET_UPDATING_STATE":return Object(g.a)({},e,{updatingDatabase:t.updatingState});default:return e}},q=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=function(){var t=Object(u.a)(p.a.mark(function t(r){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.props.updateDatabase();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();return n.a.createElement("div",{className:"container"},n.a.createElement(K,null),n.a.createElement("h1",null,"CO\xb2-emissions"),n.a.createElement(w,null),n.a.createElement(v.a,{variant:"warning",onClick:t},"Update database"),n.a.createElement(D,null))}}]),t}(a.Component),Q={updateDatabase:function(){return function(){var e=Object(u.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(J("in progress")),e.next=3,O.updateDatabase();case 3:r=e.sent,t("database updated"===r?J("done"):Y("Couldn't connect to the server")),setTimeout(function(){t(J(null)),t(Y(null))},4e3);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},V=Object(i.b)(function(e){return{updatingDatabase:e.database.updatingDatabase}},Q)(q),W=r(36),Z=r(99),$=Object(W.c)({search:x,database:F}),ee=Object(W.d)($,Object(W.a)(Z.a)),te=(r(231),r(233),function(){s.a.render(n.a.createElement(i.a,{store:ee},n.a.createElement(V,null)),document.getElementById("root"))});te(),ee.subscribe(te)}},[[101,2,1]]]);
//# sourceMappingURL=main.6b3c4214.chunk.js.map